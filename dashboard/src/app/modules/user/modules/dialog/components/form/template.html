<form (ngSubmit)="onSubmit()" [formGroup]="userForm">
  <div class="ui-g ui-fluid">
    <div class="ui-g-12 ui-md-6">
      <div class="ui-g-12 ui-md-4">
        <label>Prénom</label>
      </div>
      <div class="ui-g-12 ui-md-8">
        <input type="text" pInputText formControlName="firstname">
        <p-message
            severity="error"
            [text]="userForm.controls['firstname'].errors['required'] ? 'Le prénom est requis.' : ''"
            *ngIf="!userForm.controls['firstname'].valid&&userForm.controls['firstname'].dirty">
        </p-message>
      </div>
    </div>
    <div class="ui-g-12 ui-md-6">
      <div class="ui-g-12 ui-md-4">
        <label>Nom</label>
      </div>
      <div class="ui-g-12 ui-md-8">
        <input type="text" pInputText formControlName="lastname">
        <p-message
            severity="error"
            [text]="userForm.controls['lastname'].errors['required'] ? 'Le nom est requis.' : ''"
            *ngIf="!userForm.controls['lastname'].valid&&userForm.controls['lastname'].dirty">
        </p-message>
      </div>
    </div>
  </div>
  <div class="ui-g ui-fluid">
    <div class="ui-g-12 ui-md-6">
      <div class="ui-g-12 ui-md-4">
        <label>Email</label>
      </div>
      <div class="ui-g-12 ui-md-8">
        <input type="text" pInputText formControlName="email">
        <p-message
            severity="error"
            [text]="userForm.controls['email'].errors['required'] ? 'L\'email est requis.' : userForm.controls['email'].errors['pattern'] ? 'Email invalide' : ''"
            *ngIf="!userForm.controls['email'].valid&&userForm.controls['email'].dirty">
        </p-message>
      </div>
    </div>
    <div class="ui-g-12 ui-md-6">
      <div class="ui-g-12 ui-md-4">
        <label>Téléphone</label>
      </div>
      <div class="ui-g-12 ui-md-8">
        <p-inputMask formControlName="phone" mask="99-99-99-99-99" [unmask]="true"></p-inputMask>
        <p-message
            severity="error"
            [text]="userForm.controls['phone'].errors['required'] ? 'Le numéro de téléphone est requis.' : userForm.controls['phone'].errors['pattern'] ? 'Numéro de téléphone invalide' : ''"
            *ngIf="!userForm.controls['phone'].valid&&userForm.controls['phone'].dirty">
        </p-message>
      </div>
    </div>
  </div>
  <div class="ui-g ui-fluid">
    <div class="ui-g-12 ui-md-6">
      <div class="ui-g-12 ui-md-4">
        <label>Mot de passe</label>
      </div>
      <div class="ui-g-12 ui-md-8">
        <input type="password" pInputText formControlName="password">
        <p-message
            severity="error"
            [text]="userForm.controls['password'].errors['required'] ? 'Le mot de passe est requis.' : (userForm.controls['password'].errors['minLength'] || userForm.controls['password'].errors['maxLength']) ? '' : 'Le mot de passe doit comprendre entre 6 et 128 caractères'"
            *ngIf="!userForm.controls['password'].valid&&userForm.controls['password'].dirty">
        </p-message>
      </div>
    </div>
  </div>
  <div class="ui-g ui-fluid">
    <div class="ui-g-12 ui-md-6">
      <div class="ui-g-12 ui-md-4">
        <label>Rôle</label>
      </div>
      <div class="ui-g-12 ui-md-8">
        <p-dropdown
            autoWidth="false"
            [style]="{'width':'100%'}"
            [options]="roles"
            formControlName="role"
            placeholder="Selectionner un role"
        >
        </p-dropdown>
      </div>
    </div>
    <div class="ui-g-12 ui-md-6">
      <div class="ui-g-12 ui-md-4">
        <label>Groupe</label>
      </div>
      <div class="ui-g-12 ui-md-8">
        <p-dropdown
            autoWidth="false"
            [style]="{'width':'100%'}"
            [options]="groups"
            formControlName="group"
            placeholder="Selectionner un groupe"
        ></p-dropdown>
      </div>
    </div>
  </div>
  <div class="ui-g ui-fluid" *ngIf="isAom()">
    <div class="ui-g-12 ui-md-6">
      <label>Autorité organisatrice de la mobilité</label>
    </div>
    <div class="ui-g-12 ui-md-6">
      <app-aom-dropdown
          [aomId]="userForm.get('aom')"
      >
      </app-aom-dropdown>
    </div>
  </div>
  <div class="ui-g ui-fluid" *ngIf="isOperator()">
    <div class="ui-g-12 ui-md-6">
      <label>Opérateur</label>
    </div>
    <div class="ui-g-12 ui-md-6">
      <app-operator-dropdown
          [operatorId]="userForm.get('operator')"
      >
      </app-operator-dropdown>
    </div>
  </div>
  <br><br>
  <div class="ui-g ui-fluid">
    <p-button label="Enregistrer"></p-button>
  </div>
</form>
