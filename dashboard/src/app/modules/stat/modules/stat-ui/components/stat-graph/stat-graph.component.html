<h3 class="graphTitle" *ngIf="!lightMode">{{ graphTitle }}</h3>

<!--Distance-->
<div class="graph" *ngIf="_displayGraph === 'distance'">
  <div class="graph-header" *ngIf="!lightMode">
    <mat-button-toggle-group [(ngModel)]="toggleChart.distance" (ngModelChange)="setGraphTitle()">
      <mat-button-toggle aria-label="cumulé" value="cumulated">
        Cumulé
      </mat-button-toggle>
      <mat-button-toggle aria-label="par jour" value="daily">
        Par jour
      </mat-button-toggle>
      <mat-button-toggle aria-label="par mois" value="monthly">
        Par mois
      </mat-button-toggle>
    </mat-button-toggle-group>
  </div>
  <div class="graph-message" *ngIf="!isEmptyDataset(data.distance.daily) && toggleChart.distance === 'daily'">
    Aucun trajet n'a été réalisé la semaine dernière.
  </div>
  <div class="graph-message" *ngIf="!isEmptyDataset(data.distance.monthly) && toggleChart.distance === 'monthly'">
    Aucun trajet n'a été réalisé le mois dernier.
  </div>
  <div class="graph-message" *ngIf="!isEmptyDataset(data.distance.cumulated) && toggleChart.distance === 'cumulated'">
    Aucun trajet n'a été réalisé les derniers mois.
  </div>
  <ngx-chartjs
    [data]="data.distance.daily"
    *ngIf="isEmptyDataset(data.distance.daily) && toggleChart.distance === 'daily'"
    type="bar"
    [height]="70"
    [options]="options.distancePerDay"
  ></ngx-chartjs>
  <ngx-chartjs
    [data]="data.distance.monthly"
    *ngIf="isEmptyDataset(data.distance.monthly) && toggleChart.distance === 'monthly'"
    type="bar"
    [height]="70"
    [options]="options.distancePerMonth"
  ></ngx-chartjs>
  <ngx-chartjs
    [data]="data.distance.cumulated"
    *ngIf="isEmptyDataset(data.distance.cumulated) && toggleChart.distance === 'cumulated'"
    type="line"
    [height]="70"
    [options]="options.distancePerDayCumulated"
  ></ngx-chartjs>
</div>

<!--Trips-->
<div class="graph" *ngIf="_displayGraph === 'trips'">
  <div class="graph-header graph-trips-header">
    <div class="graph-trips-legend-wrapper">
      <div class="graph-trips-legend">
        <div class="legend-square legend-square-secondary-color"></div>
        <div class="graph-trips-legend-label">
          <span>Tous les trajets réalisés</span>
        </div>
      </div>
      <div class="graph-trips-legend">
        <div class="legend-square legend-square-primary-color"></div>
        <div class="graph-trips-legend-label">
          <span>Trajets subventionnés</span>
        </div>
      </div>
    </div>
    <div class="graph-trips-toggle-wrapper" *ngIf="!lightMode">
      <mat-button-toggle-group [(ngModel)]="toggleChart.trips" (ngModelChange)="setGraphTitle()">
        <mat-button-toggle aria-label="cumulé" value="cumulated">
          Cumulé
        </mat-button-toggle>
        <mat-button-toggle aria-label="par jour" value="daily">
          Par jour
        </mat-button-toggle>
        <mat-button-toggle aria-label="par mois" value="monthly">
          Par mois
        </mat-button-toggle>
      </mat-button-toggle-group>
    </div>
  </div>
  <div class="graph-message" *ngIf="!isEmptyDataset(data.trips.daily) && toggleChart.trips === 'daily'">
    Aucun trajet n'a été réalisé la semaine dernière.
  </div>
  <div class="graph-message" *ngIf="!isEmptyDataset(data.trips.monthly) && toggleChart.trips === 'monthly'">
    Aucun trajet n'a été réalisé le mois dernier.
  </div>
  <div class="graph-message" *ngIf="!isEmptyDataset(data.trips.cumulated) && toggleChart.trips === 'cumulated'">
    Aucun trajet n'a été réalisé les derniers mois.
  </div>
  <ngx-chartjs
    [data]="data.trips.daily"
    *ngIf="isEmptyDataset(data.trips.daily) && toggleChart.trips === 'daily'"
    type="bar"
    [height]="70"
    [options]="options.tripsPerDay"
  ></ngx-chartjs>
  <ngx-chartjs
    [data]="data.trips.monthly"
    *ngIf="isEmptyDataset(data.trips.monthly) && toggleChart.trips === 'monthly'"
    type="bar"
    [height]="70"
    [options]="options.tripsPerMonth"
  ></ngx-chartjs>
  <ngx-chartjs
    [data]="data.trips.cumulated"
    *ngIf="isEmptyDataset(data.trips.cumulated) && toggleChart.trips === 'cumulated'"
    type="line"
    [height]="70"
    [options]="options.tripsPerDayCumulated"
  ></ngx-chartjs>
</div>

<!--Carpoolers-->
<div class="graph" *ngIf="_displayGraph === 'carpoolers'">
  <mat-button-toggle-group [(ngModel)]="toggleChart.carpoolers" (ngModelChange)="setGraphTitle()" *ngIf="!lightMode">
    <mat-button-toggle aria-label="cumulé" value="cumulated">
      Cumulé
    </mat-button-toggle>
    <mat-button-toggle aria-label="par mois" value="monthly">
      Par mois
    </mat-button-toggle>
  </mat-button-toggle-group>
  <div class="graph-message" *ngIf="!isEmptyDataset(data.carpoolers.monthly) && toggleChart.carpoolers === 'monthly'">
    Aucun trajet n'a été réalisé le mois dernier.
  </div>
  <div
    class="graph-message"
    *ngIf="!isEmptyDataset(data.carpoolers.cumulated) && toggleChart.carpoolers === 'cumulated'"
  >
    Aucun trajet n'a été réalisé les derniers mois.
  </div>
  <ngx-chartjs
    [data]="data.carpoolers.monthly"
    *ngIf="isEmptyDataset(data.carpoolers.monthly) && toggleChart.carpoolers === 'monthly'"
    type="bar"
    [height]="70"
    [options]="options.carpoolersPerMonth"
  ></ngx-chartjs>
  <ngx-chartjs
    [data]="data.carpoolers.cumulated"
    *ngIf="isEmptyDataset(data.carpoolers.cumulated) && toggleChart.carpoolers === 'cumulated'"
    type="line"
    [height]="70"
    [options]="options.carpoolersPerDayCumulated"
  ></ngx-chartjs>
</div>

<!--Petrol-->
<div class="graph" *ngIf="_displayGraph === 'petrol'">
  <mat-button-toggle-group [(ngModel)]="toggleChart.petrol" (ngModelChange)="setGraphTitle()" *ngIf="!lightMode">
    <mat-button-toggle aria-label="cumulé" value="cumulated">
      Cumulé
    </mat-button-toggle>
    <mat-button-toggle aria-label="par mois" value="monthly">
      Par mois
    </mat-button-toggle>
  </mat-button-toggle-group>
  <div class="graph-message" *ngIf="!isEmptyDataset(data.petrol.monthly) && toggleChart.petrol === 'monthly'">
    Aucun trajet n'a été réalisé le mois dernier.
  </div>
  <div class="graph-message" *ngIf="!isEmptyDataset(data.petrol.cumulated) && toggleChart.petrol === 'cumulated'">
    Aucun trajet n'a été réalisé les derniers mois.
  </div>
  <ngx-chartjs
    [data]="data.petrol.monthly"
    *ngIf="isEmptyDataset(data.petrol.monthly) && toggleChart.petrol === 'monthly'"
    type="bar"
    [height]="70"
    [options]="options.petrolPerMonth"
  ></ngx-chartjs>
  <ngx-chartjs
    [data]="data.petrol.cumulated"
    *ngIf="isEmptyDataset(data.petrol.cumulated) && toggleChart.petrol === 'cumulated'"
    type="line"
    [height]="70"
    [options]="options.petrolPerDayCumulated"
  ></ngx-chartjs>
</div>

<!--CO2-->
<div class="graph" *ngIf="_displayGraph === 'co2'">
  <mat-button-toggle-group [(ngModel)]="toggleChart.co2" (ngModelChange)="setGraphTitle()" *ngIf="!lightMode">
    <mat-button-toggle aria-label="cumulé" value="cumulated">
      Cumulé
    </mat-button-toggle>
    <mat-button-toggle aria-label="par mois" value="monthly">
      Par mois
    </mat-button-toggle>
  </mat-button-toggle-group>
  <div class="graph-message" *ngIf="!isEmptyDataset(data.co2.monthly) && toggleChart.co2 === 'monthly'">
    Aucun trajet n'a été réalisé le mois dernier.
  </div>
  <div class="graph-message" *ngIf="!isEmptyDataset(data.co2.cumulated) && toggleChart.co2 === 'cumulated'">
    Aucun trajet n'a été réalisé les derniers mois.
  </div>
  <ngx-chartjs
    [data]="data.co2.monthly"
    *ngIf="isEmptyDataset(data.co2.monthly) && toggleChart.co2 === 'monthly'"
    type="bar"
    [height]="70"
    [options]="options.co2PerMonth"
  ></ngx-chartjs>
  <ngx-chartjs
    [data]="data.co2.cumulated"
    *ngIf="isEmptyDataset(data.co2.cumulated) && toggleChart.co2 === 'cumulated'"
    type="line"
    [height]="70"
    [options]="options.co2PerDayCumulated"
  ></ngx-chartjs>
</div>

<!--Carpoolers per vehicule-->
<div class="graph" *ngIf="_displayGraph === 'carpoolersPerVehicule'">
  <mat-button-toggle-group
    [(ngModel)]="toggleChart.carpoolersPerVehicule"
    (ngModelChange)="setGraphTitle()"
    *ngIf="!lightMode"
  >
    <mat-button-toggle aria-label="par jour" value="daily">
      Par jour
    </mat-button-toggle>
    <mat-button-toggle aria-label="par mois" value="monthly">
      Par mois
    </mat-button-toggle>
  </mat-button-toggle-group>
  <div
    class="graph-message"
    *ngIf="!isEmptyDataset(data.carpoolersPerVehicule.daily) && toggleChart.carpoolersPerVehicule === 'daily'"
  >
    Aucun trajet n'a été réalisé la semaine dernière.
  </div>
  <div
    class="graph-message"
    *ngIf="!isEmptyDataset(data.carpoolersPerVehicule.monthly) && toggleChart.carpoolersPerVehicule === 'monthly'"
  >
    Aucun trajet n'a été réalisé les derniers mois.
  </div>
  <ngx-chartjs
    *ngIf="isEmptyDataset(data.carpoolersPerVehicule.daily) && toggleChart.carpoolersPerVehicule === 'daily'"
    [data]="data.carpoolersPerVehicule.daily"
    type="bar"
    [height]="70"
    [options]="options.carpoolersPerVehiculePerDay"
  ></ngx-chartjs>
  <ngx-chartjs
    *ngIf="isEmptyDataset(data.carpoolersPerVehicule.monthly) && toggleChart.carpoolersPerVehicule === 'monthly'"
    [data]="data.carpoolersPerVehicule.monthly"
    type="bar"
    [height]="70"
    [options]="options.carpoolersPerVehiculePerMonth"
  ></ngx-chartjs>
</div>
